---
description: Analyze git changes and generate a well-formatted commit message
---

# Create Commit Message

Issue/Ticket (optional): $ARGUMENTS

Analyze current git changes and create a proper commit message.

## Step 1: Check Staged Changes
```bash
git diff --staged --name-only
```

**If NO staged changes:**
- Show unstaged changes: `git status`
- Ask: "No files staged. Do you want to:"
  1. Stage all changes (`git add .`)
  2. Stage specific files
  3. Cancel

**If staged changes exist:**
- Continue to Step 2

## Step 2: Gather Change Info
```bash
git diff --staged
git log --oneline -5
```

## Step 3: Detect Pattern & Analyze

**Check for commit pattern:**
Look at recent commits for initials like `JM:`, `AB:` at the start.
- Found pattern → Use same initials
- No pattern → Skip initials

**Analyze the changes:**
- What changed? (files, logic)
- Main feature/fix/refactor?
- Breaking changes?
- How many lines changed?

## Step 4: Generate Commit Message

**Match existing pattern (initials if found)**

**For SMALL changes (quick fix, minor tweak):**
```
JM: fix(auth): correct token expiry check
```
Single line only.

**For SIGNIFICANT changes (new feature, major refactor, lots of logic):**
```
JM: feat(auth): add JWT authentication

- Implement token generation and verification
- Update login endpoint to return JWT
- Add token refresh mechanism
- Remove old session logic
- Update auth middleware
```
Max 5 bullets, one line each.

**Types:**
- `feat`: New feature
- `fix`: Bug fix
- `refactor`: Code restructure
- `perf`: Performance
- `chore`: Maintenance
- `docs`: Documentation

**If $ARGUMENTS provided (issue number):**
Add at the end: `Closes #$ARGUMENTS` or `Refs #$ARGUMENTS`

Example:
```
JM: feat(payment): add Stripe integration

- Add Stripe SDK configuration
- Create payment intent endpoint
- Handle webhook events
- Update checkout flow

Closes #123
```

## Step 5: Present & Commit

Show the generated commit message and ask:
1. Use this message?
2. Edit it?
3. Cancel?

If approved, execute:
```bash
git commit -m "message here"
```

## Guidelines
- **Be concise**: "fix validation" not "fixed the validation bug in the login form"
- **Skip obvious**: Don't list import changes, formatting
- **When in doubt**: Single line (keep it simple)
- **Breaking changes**: Mention explicitly
- **Issue refs**: Use $ARGUMENTS for ticket numbers