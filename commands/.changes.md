---
description: Visual summary of code changes showing data flow and how updates connect through the system
---

# Changes Summary

Show what changed and how data/logic flows through the modified code.

## Step 1: Get Changed Files
```bash
git diff --name-only HEAD~1 HEAD
```
Or use current session changes if no commits yet.

## Step 2: Analyze Each File
For each changed file, extract:

**React/TypeScript files:**
- New/modified state: `useState`, `useReducer`
- New/modified props and their types
- New/modified hooks: `useEffect`, `useMemo`, etc.
- New functions/handlers added
- API calls: `fetch`, `axios` calls

**Laravel/PHP files:**
- New/modified methods in controllers
- Validation rules: `$request->validate()`
- Model methods called: `User::find()`, `->save()`
- Database queries
- Response structure: `response()->json()`

**API Routes:**
- HTTP method and path
- Request parameters expected
- What it calls (service, controller, etc.)

**Database migrations:**
- Tables modified
- Columns added/changed
- Indexes, foreign keys

## Step 3: Map The Flow
Show how data moves through the changed files using arrows and hierarchy.

**Add natural language explanations for:**
- New business logic (WHY this change exists)
- Complex transformations
- Non-obvious flows
- Breaking changes

## Step 4: Verification Checklist
Generate a quick checklist for the developer to verify:
- [ ] Tests updated/added?
- [ ] Types match across boundaries?
- [ ] Error handling present?
- [ ] Breaking changes documented?
- [ ] Database migrations run?

## Output Format
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ“ CHANGES SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ FILES: 8 changed
   Key: users-views-export-button.tsx [NEW]
        usage.ts, users-views-table.tsx

ğŸ”„ FLOW:

UsersViewsTable â†’ UsersViewsExportButton [NEW]
â”œâ”€ Props: mids, search, sort, filters
â”œâ”€ handleExport(): builds CSV from user activity
â”œâ”€ Calls: exportUsersWithActivity(filters)
     â†“
usage.ts (Server Action)
â”œâ”€ New: exportUsersWithActivity()
â”œâ”€ POST /reporting/usage/users-views/export
â”œâ”€ Returns: userId, name, email, pageTitle, timeSpent
     â†“
âš ï¸  Backend: Endpoint NOT implemented yet

ğŸ“– NEW FEATURE: Export Users Activity
   "Export button that pulls user pageviews/downloads 
   matching current table filters. Outputs CSV with 
   formatted durations."

ğŸ’¡ OTHER:
   â€¢ Migrated toast â†’ sonner (3 files)
   â€¢ Props threaded down 3 levels for filters

âœ… TODO:
   [ ] Implement Laravel endpoint
   [ ] Test with 100+ users
   [ ] Add loading state feedback

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Guidelines
- Show ACTUAL code details (method names, state variables, props)
- Add ğŸ“– Business Logic sections for new/complex logic with plain English WHY
- Use proper indentation to show hierarchy
- Use arrows (â†“ â†‘) to show flow direction
- Group related changes together
- Highlight breaking changes with âš ï¸
- Include verification checklist
- List specific areas to test
- Keep it scannable - a developer should "get it" in 30 seconds

Focus on **what a developer needs to understand AND verify the update quickly**.